<!DOCTYPE html>
<meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline' 'unsafe-eval';">
<html>

<head>
    <meta charset="UTF-8">
    <title>ATV Remote</title>
    <link rel="stylesheet" href="css/loaders.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/pure-min.css">
    <link rel="stylesheet" href="css/all.css">
    <link rel="stylesheet" id="s2style-sheet" href="css/select2.min.css">
    <script>
        window.jQuery = window.$ = require('jquery');
        require('./js/select2.min.js')($)
    </script>
    <script src="js/tippy-headless.umd.min.js"></script>
    <script src="js/loader.js"></script>


    <body>
        <div class="grab-bar"></div>
        <div class="pure-g">
            <div class="pure-u-1-3">
                <div id="helpIconWrapper">
                    <button id="helpIcon" class="simpleButton"><span class="keyText"><i class="fas fa-sm fa-question"></i></span></button>
                </div>
            </div>
            <div class="pure-u-1-3">
                <div id="powerButtonWrapper" class="center">
                    <button data-key="power" class="simpleButton"><span class="keyText">Power</span></button>
                </div>
            </div>
            <div class="pure-u-1-3">
                <div id="exitLinkWrapper">
                    <button id="exitLink" class="simpleButton"><span class="keyText">Quit</span></button>
                </div>
            </div>
            <div class="pure-u-1-1">
                <div class="center">
                    <h2 class="topText">
                        <span id="topTextHeader">ATV Remote</span>
                        <span id="topTextKBLink"><a href="#" onclick="openKeyboardClick(event)">Use Keyboard</a></span>
                    </h2>
                    <div id="initText"> 
                        <p>If this is the first time this program has started, please be patient. It may take up to five minutes to get set up.</p>
                        <p>The Python library <strong>pyatv</strong> is being installed in the directory:</p>
                        <p><span id="workingPathSpan" class="text-selectable"></span></p>
                        <p>This only happens the first time the program is run, it will normally start much more quickly.</p>
                        <p>If you see this message after waiting 5 minutes, review the <strong class="text-selectable">atv_pip_install.log</strong> file in the directory above.</p>
                        <div style="text-align:center">
                            <div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="main">

            <div id="addNewElements">
                <div id="loader">
                    <div id="pairingLoader"></div>
                </div>
                <div id="pairingElements">

                    <div id="results">
                        <label for="atv_picker">Select a device below to start pairing. You only need to do this once.</label>
                        <select id="atv_picker"></select>
                    </div>
                    <div id="pairCodeElements">
                        <label for="pairCode">Enter the 4 digit code here. This will be displayed on the device you selected.<br><span style="font-size:0.8em">Pairing <span id="pairProtocolName">AirPort</span> credentials (pairing step <span id="pairStepNum">1</span> of 2)</span>
                        <input id="pairCode" type="text" style="text-align: center" maxlength="4" />
                    </label><button onclick="javascript:;" class="simpleButton" id="pairButton">Submit</button>
                    
                    </div>
                    <button id="cancelPairing" class="simpleButton"><span class="keyText">Cancel</span></button>
                </div>
            </div>
            <div id="runningElements">

                <div id="keyMapElement"></div>
                <div class="pure-g">
                    <div class="pure-u-1 pure-u-md-1-4"></div>
                    <div class="pure-u-1 pure-u-md-1-2">
                        <table class="pythonError">
                            <tr>
                                <td></td>
                                <td><span class="pythonErrorHeader">Python not found</span></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>You must install Python to use this program. Visit python.org to download Python, and make sure to select the option to add Python to the path.</td>
                                <td></td>
                            </tr>
                        </table>
                        <table class="directionTable">
                                <td>
                                    <div data-key="volume_down" data-tippy-content="Lower Volume" class="directionCircle volumeKeys"><span class='keyText'><i class="fas fa-volume-down"></i></span></div>
                                </td>
                                <td>
                                    <div data-key="up" data-tippy-content="Up arrow" class="directionArrows directionCircle"><span class='keyText'><i class="fas fa-arrow-up"></i></span></div>
                                </td>
                                <td>
                                    <div data-key="volume_up" data-tippy-content="Raise Volume" class="directionCircle volumeKeys"><span class='keyText'><i class="fas fa-volume-up"></i></span></div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div data-key="left" class="directionArrows directionCircle"><span class='keyText'><i class="fas fa-arrow-left"></i></span></div>
                                </td>
                                <td>
                                    <div data-key="select" class="selectArrow directionArrows directionCircle"><span class='keyText'>Select</span></div>
                                </td>
                                <td>
                                    <div data-key="right" class="directionArrows directionCircle"><span class='keyText'><i class="fas fa-arrow-right"></i></span></div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div data-key="skip_backward" class="directionCircle"><span class='keyText'>Prev</span></div>
                                </td>
                                <td>
                                    <div data-key="down" class="directionArrows directionCircle"><span class='keyText'><i class="fas fa-arrow-down"></i></span></div>
                                </td>
                                <td>
                                    <div data-key="skip_forward" class="directionCircle"><span class='keyText'>Next</span></div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="directionCircle" data-key="play_pause"><span class='keyText'><i class="fas fa-play"></i>&nbsp;<i class="fas fa-pause"></i></span></div>
                                </td>
                                <td>
                                    <div class="directionCircle menuButton" data-key="menu"><span class='keyText'>Menu</span></div>
                                </td>
                                <td>
                                    <div class="directionCircle" data-key="Tv"><span class='keyText'>TV</span></div>
                                </td>
                            </tr>
                        </table>

                    </div>
                    <div class="pure-u-1 pure-u-md-1-4"></div>

                    <div class="pure-u-1-12"></div>
                    <div class="pure-u-5-6"></div>
                    <div class="pure-u-1-12"></div>
                </div>

            </div>

            <!-- Keyboard Shortcuts Overlay -->
            <div id="keyboardShortcuts">
                <button id="closeShortcuts"><i class="fas fa-times"></i></button>
                <h2 class="center">Keyboard Shortcuts</h2>
                <div class="shortcutGrid">
                    <div class="shortcutItem">
                        <span>Show</span>
                        <span class="shortcutKey" data-shortcut="show"><i>Unset</i></span>
                    </div>
                    <div class="shortcutItem">
                        <span>Navigation</span>
                        <span class="shortcutKey">Arrow Keys</span>
                    </div>
                    <div class="shortcutItem">
                        <span>Select</span>
                        <span class="shortcutKey">Enter</span>
                    </div>
                    <div class="shortcutItem">
                        <span>Play/Pause</span>
                        <span class="shortcutKey">Space</span>
                    </div>
                    <div class="shortcutItem">
                        <span>Menu</span>
                        <span class="shortcutKey">Esc</span>
                    </div>
                    <div class="shortcutItem">
                        <span>TV (Long Press)</span>
                        <span class="shortcutKey">T (L)</span>
                    </div>
                    <div class="shortcutItem">
                        <span>Previous</span>
                        <span class="shortcutKey">P, [</span>
                    </div>
                    <div class="shortcutItem">
                        <span>Next</span>
                        <span class="shortcutKey">N, ]</span>
                    </div>
                    <div class="shortcutItem">
                        <span>Volume Down</span>
                        <span class="shortcutKey">-, _</span>
                    </div>
                    <div class="shortcutItem">
                        <span>Volume Up</span>
                        <span class="shortcutKey">+, =</span>
                    </div>
                    <div class="shortcutItem">
                        <span>Power On/Off</span>
                        <span class="shortcutKey">O</span>
                    </div>
                    <div class="shortcutItem">
                        <span>Hide Window</span>
                        <span class="shortcutKey">H</span>
                    </div>
                    <div class="shortcutItem">
                        <span>Quit</span>
                        <span class="shortcutKey">Q (3x)</span>
                    </div>
                </div>
            </div>

            <div id="cmdWrapper">
                <div id="cmdFade"></div>
            </div>

        </div>
        <footer>
            <div class="footer center">
                <h2 id="statusText"></h2>
                <div id="atvDropdownContainer"></div>
            </div>
        </footer>
    </body>
    <script src="web_remote.js"></script>
    <script src="ws_remote.js"></script>

</html>
